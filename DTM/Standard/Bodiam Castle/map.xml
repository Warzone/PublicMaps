<?xml version="1.0"?>
<map proto="1.4.0" game="Bed Wars">
<name>Bodiam Castle</name>
<phase>development</phase>
<version>1.0.0</version>
<objective>Destroy the enemy teams' bed and eliminate them before they get to yours.</objective>
<gamemode>dtm</gamemode>
<gamemode>blitz</gamemode>
<!-- Authors and Contributors -->
<authors>
    <author uuid="6ff4ade9-e968-4acd-80eb-1a6fa89629fb" contribution="Map, XML, &amp; custom NBT creation"/> <!-- _Pear -->
    <author uuid="3d741e18-8da0-4780-a6b1-ca38e6768022" contribution="Inspired the map, built team spawns, &amp; consulting"/> <!-- Santiagx -->
</authors>
<contributors>
    <contributor uuid="571c1d9d-4d49-43bd-bfdb-30563e920ca9" contribution="Terrain &amp; layout"></contributor> <!-- Wesdial -->
    <contributor uuid="f3a45bea-dbde-4791-8155-0988b644ac3b" contribution="Layout, detailing, &amp; name suggestion"></contributor> <!-- _iMan -->
    <contributor uuid="0631dda2-ef9b-4f78-b16b-f4123d97d6b7" contribution="Terrain &amp; detailing"></contributor> <!-- Qualqty -->
    <contributor uuid="d9efc01d-cd33-46c2-afe5-a6fc3f419f77" contribution="European castles expert"></contributor> <!-- _NotMaria -->
    <contributor uuid="8dae23df-a462-471e-bd83-61a23e2ac9e7" contribution="Map testing &amp; terrain"></contributor> <!-- DeadlyTrap -->
</contributors>
<!-- Match Control -->
<respawn auto="true" delay="5s"/>
<time result="objectives">50m</time>
<!-- Blitz and Sudden Death -->
<blitz filter="bed-destruction">
    <lives>1</lives>
    <broadcastLives>false</broadcastLives>
</blitz>
<!-- Teams -->
<teams>
    <team id="blue-team" color="blue" min="2" max="4">Blue</team>
    <team id="red-team" color="dark red" min="2" max="4">Red</team>
    <team id="green-team" color="green" min="2" max="4">Green</team>
    <team id="yellow-team" color="yellow" min="2" max="4">Yellow</team>
</teams>
<!-- Kits -->
<kits>
    <kit id="default">
        <item slot="0" unbreakable="true">wood sword</item>
        <helmet unbreakable="true" locked="true" team-color="true">leather helmet</helmet>
        <chestplate unbreakable="true" locked="true" team-color="true">leather chestplate</chestplate>
        <leggings unbreakable="true" locked="true" team-color="true">leather leggings</leggings>
        <boots unbreakable="true" locked="true" team-color="true">leather boots</boots>
    </kit>
    <!-- Refer to Kits Upgrade Tokens section of filters & applications section of regions for kit handling -->
    <kit id="chainmail-armor-kit" force="true">
        <leggings unbreakable="true" locked="true">chainmail leggings</leggings>
        <boots unbreakable="true" locked="true">chainmail boots</boots>
    </kit>
    <kit id="iron-armor-kit" force="true">
        <leggings unbreakable="true" locked="true">iron leggings</leggings>
        <boots unbreakable="true" locked="true">iron boots</boots>
    </kit>
    <kit id="diamond-armor-kit" force="true">
        <leggings unbreakable="true" locked="true">diamond leggings</leggings>
        <boots unbreakable="true" locked="true">diamond boots</boots>
    </kit>
    <kit id="fireball-kit" force="true">
        <item projectile="fireball-projectile">fireball</item>
    </kit>
</kits>
<!-- Spawns -->
<spawns>
    <spawn team="blue-team" kit="default" region="blue-spawn" yaw="-90"/>
    <spawn team="red-team" kit="default" region="red-spawn"/>
    <spawn team="green-team" kit="default" region="green-spawn" yaw="180"/>
    <spawn team="yellow-team" kit="default" region="yellow-spawn" yaw="90"/>
    <default region="obs-spawn"/>
</spawns>
<!-- Monuments -->
<destroyables completion="50%" required="false" repairable="false" materials="bed_block" show="true" sparks="true">
    <destroyable name="Blue Bed" owner="blue-team" region="blue-bed" id="blue-bed-broken"/>
    <destroyable name="Red Bed" owner="red-team" region="red-bed" id="red-bed-broken"/>
    <destroyable name="Green Bed" owner="green-team" region="green-bed" id="green-bed-broken"/>
    <destroyable name="Yellow Bed" owner="yellow-team" region="yellow-bed" id="yellow-bed-broken"/>
</destroyables>
<!-- Filters -->
<filters>
    <!-- Testing Time Filters -->
    <time id="1m-passed">1m</time>
    <!-- Time Filters -->
    <time id="6m-passed">6m</time>
    <time id="12m-passed">12m</time>
    <time id="18m-passed">18m</time>
    <!-- Team Filters -->
    <team id="blue-only">blue-team</team>
    <team id="red-only">red-team</team>
    <team id="green-only">green-team</team>
    <team id="yellow-only">yellow-team</team>
    <!-- Sudden Death/Monuments Filters  -->
    <any id="bed-destruction">
        <any>
            <all>
                <team>blue-team</team>
                <objective>blue-bed-broken</objective>
            </all>
        </any>
        <any>
            <all>
                <team>red-team</team>
                <objective>red-bed-broken</objective>
            </all>
        </any>
        <any>
            <all>
                <team>green-team</team>
                <objective>green-bed-broken</objective>
            </all>
        </any>
        <any>
            <all>
                <team>yellow-team</team>
                <objective>yellow-bed-broken</objective>
            </all>
        </any>
    </any>
    <any id="breakables"> <!-- List of blocks that players can modify while keeping the map intact -->
        <material>wool:11</material>
        <material>wool:14</material>
        <material>wool:5</material>
        <material>wool:4</material>
        <material>stained clay:11</material>
        <material>stained clay:14</material>
        <material>stained clay:5</material>
        <material>stained clay:4</material>
        <material>stained glass:11</material>
        <material>stained glass:14</material>
        <material>stained glass:5</material>
        <material>stained glass:4</material>
        <material>ender stone</material>
        <material>wood:0</material>
        <material>obsidian</material>
        <material>tnt</material>
        <material>sponge</material>
        <material>water</material>
        <material>stationary water</material>
        <material>yellow flower</material>
        <material>red rose</material>
        <material>double plant</material>
        <material>long grass</material>
        <material>bed block</material>
    </any>
    <deny id="tnt-immune"> <!-- List of blocks that will be protected against TNT explosions -->
        <all>
            <cause>explosion</cause>
            <any>
                <material>stained glass:11</material>
                <material>stained glass:14</material>
                <material>stained glass:5</material>
                <material>stained glass:4</material>
                <material>bed block</material>
            </any>
        </all>
    </deny>
    <!-- Kit Upgrade Tokens -->
    <any id="chainmail-upgrade-token">
        <carrying>
            <item name="Chainmail Armor Upgrade">chainmail chestplate</item>
        </carrying>
    </any>
    <any id="iron-upgrade-token">
        <carrying>
            <item name="Iron Armor Upgrade">iron chestplate</item>
        </carrying>
    </any>
    <any id="diamond-upgrade-token">
        <carrying>
            <item name="Diamond Armor Upgrade">diamond chestplate</item>
        </carrying>
    </any>
</filters>
<!-- Broadcasts -->
<broadcasts>
    <!-- Emerald Generators notification -->
    <alert after="1s" filter="6m-passed">`aEmerald Generators`r have been upgraded to Tier `cII`r.</alert>
    <alert after="1s" filter="12m-passed">`aEmerald Generators`r have been upgraded to Tier `cIII`r.</alert>
    <!-- Bed destruction notification -->
    <alert after="1s" filter="bed-destruction">Your team's bed was destroyed! You will no longer respawn after you die.</alert>
</broadcasts>
<!-- Regions -->
<regions>
    <!-- Definitions -->
    <union id="monuments">
        <cuboid id="blue-bed" min="-70,8,1" max="-67,10,-1"/>
        <cuboid id="red-bed" min="-1,8,-70" max="1,10,-67"/>
        <cuboid id="green-bed" min="1,8,70" max="-1,10,67"/>
        <cuboid id="yellow-bed" min="70,8,-1" max="67,10,1"/>
    </union>
    <union id="spawn-protections">
        <cylinder id="blue-spawn-protection" base="-82.5,8,0.5" radius="9" height="15"/>
        <cylinder id="red-spawn-protection" base="0.5,8,-82.5" radius="9" height="15"/>
        <cylinder id="green-spawn-protection" base="0.5,8,83.5" radius="9" height="15"/>
        <cylinder id="yellow-spawn-protection" base="83.5,8,0.5" radius="9" height="15"/>
    </union>
    <point id="blue-spawn">-82.5,9,0.5</point>
    <point id="red-spawn">0.5,9,-82.5</point>
    <point id="green-spawn">0.5,9,83.5</point>
    <point id="yellow-spawn">83.5,9,0.5</point>
    <point id="obs-spawn">0.5,88,0.5</point>
    <union id="team-chests">
        <block id="blue-team-chest">-77,9,-4</block>
        <block id="red-team-chest">4,9,-77</block>
        <block id="green-team-chest">-4,9,77</block>
        <block id="yellow-team-chest">77,9,4</block>
    </union>
    <union id="iron-gold-generators">
        <cuboid id="green-generator" min="1,9,90" max="-1,9,88"/>
        <cuboid id="blue-generator" min="-90,9,1" max="-88,9,-1"/>
        <cuboid id="red-generator" min="-1,9,-90" max="1,9,-88"/>
        <cuboid id="yellow-generator" min="90,9,-1" max="88,9,1"/>
    </union>
    <union id="diamond-generators">
        <point id="green-blue-tower">-58.5,9.5,58.5</point>
        <point id="blue-red-tower">-58.5,9.5,-58.5</point>
        <point id="red-yellow-tower">58.5,9.5,-58.5</point>
        <point id="yellow-green-tower">58.5,9.5,58.5</point>
    </union>
    <union id="emerald-generators">
        <point id="top-emerald">0.5,24.5,0.5</point>
        <point id="bottom-emerald">0.5,12.5,0.5</point>
    </union>
    <negative id="not-map">
        <rectangle id="map" min="-96,-96" max="96,96"/>
    </negative>
    <!-- Applications -->
    <apply region="spawn-protections" block="never" message="You are not allowed to modify terrain here."/>
    <apply region="not-map"           block="never" message="You may not edit outside the map!"/>
    <apply block-break="tnt-immune"/>
    <apply block="breakables"         message="You can only modify blocks placed by a player!"/>
    <apply region="green-team-chest"  use="never"   message="You cannot open this chest as the `aGreen Team`r has not been eliminated!"/>
    <apply region="blue-team-chest"   use="never"   message="You cannot open this chest as the `9Blue Team`r has not been eliminated!"/>
    <apply region="red-team-chest"    use="never"   message="You cannot open this chest as the `4Red Team`r has not been eliminated!"/>
    <apply region="yellow-team-chest" use="never"   message="You cannot open this chest as the `eYellow Team`r has not been eliminated!"/>
    <!-- <apply region="spawn-protections" kit="chainmail-armor-kit" filter="chainmail-upgrade-token"/> -->
</regions>
<!-- Spawners -->
<spawners>
    <!-- Diamond Generators (not implemented yet) -->
    <!--<spawner spawn-region="green-blue-tower" player-region="everywhere" delay="10s">
        <item amount="1" material="diamond"/>
    </spawner>
    <spawner spawn-region="blue-red-tower" player-region="everywhere" delay="10s">
        <item amount="1" material="diamond"/>
    </spawner>
    <spawner spawn-region="red-yellow-tower" player-region="everywhere" delay="10s">
        <item amount="1" material="diamond"/>
    </spawner>
    <spawner spawn-region="yellow-green-tower" player-region="everywhere" delay="10s">
        <item amount="1" material="diamond"/>
    </spawner>-->
    <!-- Emerald Generators -->
    <spawner spawn-region="bottom-emerald" player-region="everywhere" max-entities="6" delay="30s">
        <item amount="1" material="emerald"/>
    </spawner>
    <spawner spawn-region="top-emerald" player-region="everywhere" max-entities="6" delay="30s">
        <item amount="1" material="emerald"/>
    </spawner>
    <!-- Team Iron Generators -->
    <spawner spawn-region="blue-generator" player-region="everywhere" max-entities="256" delay="2s">
        <item amount="2" material="iron ingot"/>
    </spawner>
    <spawner spawn-region="red-generator" player-region="everywhere" max-entities="256" delay="2s">
        <item amount="2" material="iron ingot"/>
    </spawner>
    <spawner spawn-region="green-generator" player-region="everywhere" max-entities="256" delay="2s">
        <item amount="2" material="iron ingot"/>
    </spawner>
    <spawner spawn-region="yellow-generator" player-region="everywhere" max-entities="256" delay="2s">
        <item amount="2" material="iron ingot"/>
    </spawner>
    <!-- Team Gold Generators -->
    <spawner spawn-region="blue-generator" player-region="everywhere" max-entities="256" delay="5s">
        <item amount="1" material="gold ingot"/>
    </spawner>
    <spawner spawn-region="red-generator" player-region="everywhere" max-entities="256" delay="5s">
        <item amount="1" material="gold ingot"/>
    </spawner>
    <spawner spawn-region="green-generator" player-region="everywhere" max-entities="256" delay="5s">
        <item amount="1" material="gold ingot"/>
    </spawner>
    <spawner spawn-region="yellow-generator" player-region="everywhere" max-entities="256" delay="5s">
        <item amount="1" material="gold ingot"/>
    </spawner>
</spawners>
<!-- ItemRemove, ItemKeep, ArmorKeep -->
<itemremove>
    <item>wool</item>
    <item>wood</item>
    <item>ender stone</item>
    <item>stained clay</item>
    <item>stained glass</item>
    <item>obsidian</item>
    <item>wood sword</item>
    <item>stone sword</item>
    <item>iron sword</item>
    <item>diamond sword</item>
    <item>stick</item>
    <item>shears</item>
    <item>bow</item>
    <item>arrow</item>
    <item>ladder</item>
    <item>wood pickaxe</item>
    <item>stone pickaxe</item>
    <item>iron pickaxe</item>
    <item>diamond pickaxe</item>
    <item>wood axe</item>
    <item>stone axe</item>
    <item>iron axe</item>
    <item>diamond axe</item>
    <item>golden apple</item>
    <item>potion</item>
    <item>tnt</item>
    <item>sponge</item>
    <item>fireball</item>
    <item>ender pearl</item>
    <item>water bucket</item>
    <item>milk bucket</item>
    <item>seeds</item>
    <item>yellow flower</item>
    <item>red rose</item>
    <item>double plant</item>
    <item>long grass</item>
    <item>bed</item>
</itemremove>
<itemkeep>
    <item>stone sword</item>
    <item>iron sword</item>
    <item>diamond sword</item>
    <item>shears</item>
    <item>bow</item>
</itemkeep>
<armorkeep>
    <item>leather helmet</item>
    <item>leather chestplate</item> <!-- Leather helmet and chestplate will always be present -->
    <item>leather leggings</item>
    <item>leather boots</item>
    <item>chainmail leggings</item>
    <item>chainmail boots</item>
    <item>iron leggings</item>
    <item>iron boots</item>
    <item>diamond leggings</item>
    <item>diamond boots</item>
</armorkeep>
<!-- Projectiles -->
<projectiles>
    <projectile id="fireball-projectile" name="Fireball Blast" projectile="Fireball" click="right" damage="50" cooldown="5s"/>
</projectiles>
<!-- Item Modifications -->
<item-mods>
    <rule>
        <match>
            <material>stone sword</material>
            <material>iron sword</material>
            <material>diamond sword</material>
            <material>bow</material>
            <material>shears</material>
        </match>
        <modify unbreakable="true"/>
    </rule>
    <rule>
        <match>
            <material>stained glass</material>
        </match>
        <modify name="`rBlastproof Glass" lore="`7Immune to explosions."/>
    </rule>
    <rule>
        <match>
            <material>stick</material>
        </match>
        <modify name="`rKnockback Stick" unbreakable="true">
            <enchantment level="1">Knockback</enchantment>
        </modify>
    </rule>
</item-mods>
<!-- Crafting Control -->
<crafting>
    <disable>dirt</disable>
    <disable>stone</disable>
    <disable>wool</disable>
    <disable>workbench</disable>
    <disable>carpet</disable>
    <disable>shears</disable>
    <disable>stick</disable>
    <disable>lever</disable>
    <disable>wood button</disable>
    <disable>stone button</disable>
    <disable>wood plate</disable>
    <disable>stone plate</disable>
    <disable>gold plate</disable>
    <disable>iron plate</disable>
    <disable>iron trapdoor</disable>
    <disable>gold nugget</disable>
    <disable>flint and steel</disable>
    <disable>clay</disable>
    <disable>snow block</disable>
    <disable>wool</disable>
</crafting>
<!-- TNT Control -->
<tnt>
    <instantignite>on</instantignite>
    <licensing>false</licensing>
    <friendly-defuse>false</friendly-defuse>
</tnt>
<disabledamage>
    <damage ally="false" self="false" enemy="true" other="false">block explosion</damage>
</disabledamage>
<!-- Misc -->
<hunger>
    <depletion>off</depletion>
</hunger>
<maxbuildheight>41</maxbuildheight>
</map>